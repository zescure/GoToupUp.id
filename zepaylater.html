<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Zestore – Tukar PayLater</title>
  <style>
    /* RESET & BASE */
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Segoe UI',sans-serif;
      background: radial-gradient(ellipse at top, #001f3f, #000);
      color:#fff;
      min-height:100vh;
      overflow-x:hidden;
    }
    .container {
      max-width:480px;
      margin:2rem auto;
      padding:1rem;
    }
    h1 { text-align:center; color:#00bfff; margin-bottom:1.5rem; }

    /* STEP BOX */
    .step {
      display:none;
      background:#022c43;
      border-radius:6px;
      margin-bottom:1rem;
      padding:1rem;
    }
    .step.active { display:block; }
    .step label { display:block; margin:.5rem 0 .2rem; font-weight:600; }
    .step input[type=number],
    .step input[type=text],
    .step select {
      width:100%; padding:.6rem;
      border:none; border-radius:4px;
      font-size:1rem;
      background:rgba(255,255,255,0.1);
      color:#fff;
    }
    .step select option { background:#022c43; color:#fff; }
    .net-display {
      margin-top:0.5rem;
      color: #00ff9d;
      font-size: 0.95rem;
    }

    /* BUTTON */
    .btn {
      display:block; width:100%; margin:1rem 0;
      padding:.8rem; background:#00bfff;
      color:#011627; border:none;
      border-radius:4px; font-size:1rem;
      cursor:pointer; text-align:center;
      transition:background .2s;
    }
    .btn:hover { background:#0094d6; }

    /* MODAL SUMMARY */
    .modal-overlay {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6);
      display:none; align-items:center; justify-content:center;
      z-index:1000;
    }
    .modal {
      background:#fff; color:#011627;
      border-radius:6px; width:90%; max-width:400px;
      overflow:hidden;
    }
    .modal-header {
      background:#00bfff; padding:1rem;
      color:#011627; font-weight:bold;
    }
    .modal-body { padding:1rem; line-height:1.4; }
    .modal-body p { margin:.5rem 0; }
    .modal-body .total {
      font-weight:bold; margin-top:.5rem;
    }
    .modal-body img {
      display:block; max-width:200px;
      margin:1rem auto;
    }
    .modal-footer {
      display:flex; gap:.5rem;
    }
    .modal-footer button {
      flex:1; padding:.8rem; border:none; font-size:1rem;
      cursor:pointer;
    }
    .close-btn { background:#6c757d; color:#fff; border-radius:0 0 0 6px; }
    .pay-btn   { background:#28a745; color:#fff; border-radius:0 0 6px 0; }
  </style>
</head>
<body>

  <div class="container">
    <h1>Tukar PayLater → Saldo</h1>

    <!-- STEP 1: Nominal -->
    <div class="step active" id="step1">
      <label for="nominal">Masukan Nominal (PayLater)</label>
      <input type="number" id="nominal" placeholder="misal 100000" min="1000">
      <p class="net-display" id="netDisplay">Saldo yang akan diterima: Rp 0</p>
      <button class="btn" id="toStep2">Selanjutnya</button>
    </div>

    <!-- STEP 2: Data Penerima -->
    <div class="step" id="step2">
      <label for="wa">No. WhatsApp</label>
      <input type="text" id="wa" placeholder="628xxxxxxxxxx">

      <label for="method">Pilih Bank / E-Wallet</label>
      <select id="method">
        <optgroup label="Bank">
          <option value="BCA">BCA</option>
          <option value="Mandiri">Mandiri</option>
          <option value="BRI">BRI</option>
          <option value="BNI">BNI</option>
          <option value="CIMB">CIMB Niaga</option>
          <option value="Danamon">Danamon</option>
        </optgroup>
        <optgroup label="E-Wallet">
          <option value="GoPay">GoPay</option>
          <option value="OVO">OVO</option>
          <option value="DANA">DANA</option>
          <option value="ShopeePay">ShopeePay</option>
          <option value="LinkAja">LinkAja</option>
        </optgroup>
      </select>

      <label for="accName">Nama Pemilik Rekening</label>
      <input type="text" id="accName" placeholder="Nama pemilik">

      <label for="accNo">No. Rekening / ID E-Wallet</label>
      <input type="text" id="accNo" placeholder="Nomor rekening atau ID">

      <button class="btn" id="toSummary">Lanjutkan</button>
    </div>
  </div>

  <!-- MODAL SUMMARY -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">Rincian Transfer</div>
      <div class="modal-body">
        <p>Nominal: Rp <span id="outNominal"></span></p>
        <p>Admin: Rp <span id="adminFee"></span></p>
        <p class="total">Total Kirim: Rp <span id="totalPay"></span></p>
        <p>Rekening:</p>
        <p>– Nama: <strong><span id="outName"></span></strong></p>
        <p>– No.: <strong><span id="outNo"></span></strong></p>
        <img id="qrCode" src="qris-placeholder.png" alt="QRIS Code">
      </div>
      <div class="modal-footer">
        <button class="close-btn" id="closeModal">Batal</button>
        <button class="pay-btn" id="confirmPay">Sudah Bayar</button>
      </div>
    </div>
  </div>

  <script>
    // Step navigation
    const step1 = document.getElementById('step1'),
          step2 = document.getElementById('step2'),
          nominal = document.getElementById('nominal'),
          netDisplay = document.getElementById('netDisplay');

    // update net display = nominal - ceil(2% of nominal)
    nominal.addEventListener('input', () => {
      const nom = parseInt(nominal.value) || 0;
      const profit = Math.ceil(nom * 0.02);
      const net = nom - profit;
      netDisplay.innerText = `Saldo yang akan diterima: Rp ${net.toLocaleString('id')}`;
    });

    document.getElementById('toStep2').onclick = () => {
      if (parseInt(nominal.value) > 0) {
        step1.classList.remove('active');
        step2.classList.add('active');
      } else alert('Masukkan nominal valid.');
    };

    // Form fields
    const waEl = document.getElementById('wa'),
          methodEl = document.getElementById('method'),
          nameEl = document.getElementById('accName'),
          noEl = document.getElementById('accNo'),
          modal = document.getElementById('modalOverlay');

    document.getElementById('toSummary').onclick = () => {
      const nom  = parseInt(nominal.value,10);
      const wa   = waEl.value.trim();
      const m    = methodEl.value;
      const nm   = nameEl.value.trim();
      const no   = noEl.value.trim();
      if (!wa || !m || !nm || !no) return alert('Lengkapi semua data.');

      // 2% profit (not shown)
      const profit = Math.ceil(nom * 0.02);
      // admin fee
      const isBank = ['BCA','Mandiri','BRI','BNI','CIMB','Danamon'].includes(m);
      const admin = isBank ? 3000 : 2000;
      // total transfer
      const total = nom + profit + admin;

      // fill modal
      document.getElementById('outNominal').innerText = nom.toLocaleString('id');
      document.getElementById('adminFee').innerText   = admin.toLocaleString('id');
      document.getElementById('totalPay').innerText   = total.toLocaleString('id');
      document.getElementById('outName').innerText    = nm;
      document.getElementById('outNo').innerText      = no;

      modal.style.display = 'flex';
    };

    document.getElementById('closeModal').onclick = () => {
      modal.style.display = 'none';
    };

    document.getElementById('confirmPay').onclick = () => {
      const nom   = nominal.value,
            m     = methodEl.value,
            total = document.getElementById('totalPay').innerText,
            wa    = waEl.value.trim(),
            nm    = nameEl.value.trim(),
            no    = noEl.value.trim();
      const msg =
        `Tukar PayLater Rp ${nom}\n` +
        `Transfer ke: ${m}\n` +
        `Nama: ${nm}\n` +
        `No Rekening/ID: ${no}\n` +
        `Total bayar: Rp ${total}\n` +
        `No. WA: ${wa}`;
      const businessWa = '6281234567890';
      window.open(`https://wa.me/${businessWa}?text=`+encodeURIComponent(msg), '_blank');
    };
  </script>

</body>
</html>
