<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checkout - Mlbb Zestore</title>
  <style>
    /* ===== RESET & BASE ===== */
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Segoe UI',sans-serif;
      background: radial-gradient(ellipse at top, #001f3f, #000);
      color:#fff;
      counter-reset:step;
    }
    a { text-decoration:none; color:inherit; }
    .container { max-width:480px; margin:1rem auto; padding:1rem; }
    h2 { margin-bottom:1rem; color:#00bfff; }

    /* ===== HEADER ===== */
    header {
      display:flex; justify-content:space-between; align-items:center;
      padding:1rem; background:#011627; position:relative; z-index:1001;
    }
    .menu-btn, .login-btn {
      background:none; border:none; color:#00bfff; font-size:1.6rem; cursor:pointer;
    }
    .logo { color:#00bfff; font-size:1.6rem; letter-spacing:2px; }

    /* ===== MOBILE MENU ===== */
    .mobile-menu {
      position:fixed; top:0; left:-100%;
      width:80%; max-width:300px; height:100%;
      background:#011627; padding:2rem 1rem;
      transition:left .3s ease; z-index:1000;
    }
    .mobile-menu.open { left:0; }
    .mobile-menu ul { list-style:none; margin-top:2rem; }
    .mobile-menu li { margin:1.2rem 0; }
    .mobile-menu a { color:#fff; font-size:1.1rem; }

    /* ===== FORM STEP ===== */
    .step {
      background:#022c43; border-radius:6px;
      margin-bottom:1.5rem; overflow:hidden;
    }
    .step-header {
      background:#00bfff; padding:.8rem 1rem; position:relative;
    }
    .step-header::before {
      content:counter(step); counter-increment:step;
      position:absolute; left:-18px; top:50%; transform:translateY(-50%);
      background:#fff; color:#011627;
      width:28px; height:28px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-weight:bold;
    }
    .step-content { padding:1rem; }
    .step-content label { display:block; margin:.5rem 0 .2rem; font-weight:600; }
    .step-content input {
      width:100%; padding:.6rem; border:none; border-radius:4px; font-size:1rem;
    }

    /* ===== NOMINAL GRID & PAYMENT GRID ===== */
    .nominal-grid, .payment-grid {
      display:grid; grid-template-columns:repeat(3, 1fr); gap:1rem;
    }
    .nominal-card, .payment-card {
      width:100px; background:#022c43;
      border:2px solid transparent; border-radius:6px;
      padding:.8rem .5rem; text-align:center;
      cursor:pointer; box-shadow:0 0 6px rgba(0,191,255,0.3);
      transition:border .2s;
    }
    .nominal-card.selected, .payment-card.selected { border-color:#00bfff; }
    .nominal-card img, .payment-card img {
      width:40px; height:40px; margin-bottom:.5rem;
    }
    .nominal-card .count, .payment-card .name {
      font-size:1.1rem; font-weight:bold; margin-bottom:.3rem;
    }
    .nominal-card .price, .payment-card .fee {
      font-size:.85rem; color:#ddd;
    }
    .payment-card.disabled { opacity:0.5; pointer-events:none; }
    .payment-card .min-info {
      font-size:0.8rem; color:#888; margin-top:4px;
    }

    /* ===== BUTTON ===== */
    .btn {
      display:block; background:#00bfff; color:#011627;
      padding:.7rem 1.5rem; border:none; border-radius:4px;
      font-size:1rem; cursor:pointer; margin-top:1rem;
      text-align:center;
    }

    /* ===== MODAL ===== */
    .modal-overlay {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); display:none;
      align-items:center; justify-content:center; z-index:1002;
      padding:16px;
    }
    .modal {
      background:#fff; color:#011627; border-radius:6px; width:90%; max-width:400px; overflow:hidden;
      display:flex; flex-direction:column;
    }
    .modal-header {
      background:#00bfff; padding:.8rem 1rem; color:#011627; font-weight:bold; text-align:center;
    }
    .modal-body { padding:1rem; color:#333; }
    .modal-body p { margin:.4rem 0; font-size:1rem; line-height:1.4; }
    .modal-body p.total { margin-top:12px; font-size:1.1rem; font-weight:bold; }
    .modal-body img {
      display:block; max-width:200px; margin:1rem auto;
    }
    .modal-footer {
      display:flex; gap:1rem; padding:1rem; justify-content:center; background:#fafafa;
    }
    .modal-footer button {
      flex:1; padding:.6rem; border:none; border-radius:4px; font-size:1rem; cursor:pointer;
    }
    #btnDone { background:#28a745; color:#fff; }
    #btnClose { background:#6c757d; color:#fff; }

    /* Referral section button (Apply) */
    #btnApplyReferral {
      display:block; width:100%; max-width:300px; margin:16px auto 0 auto; padding:12px 0;
      background-color:#00bfff; color:#011627; font-size:1rem; font-weight:600; border:none; border-radius:4px;
      text-align:center; cursor:pointer;
    }
    #btnApplyReferral:hover { background-color:#9ccfe0; }

    /* Responsif modal (mobile full) */
    @media (max-width:480px) {
      .modal { width:100%; height:100%; border-radius:0; justify-content:flex-start; }
      .modal-body { padding:12px; }
      .modal-footer { padding:8px 12px; }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <button class="menu-btn">&#9776;</button>
    <div class="logo">ZESTORE.id</div>
    <button class="login-btn">mlbb</button>
  </header>

  <!-- MOBILE MENU -->
  <nav class="mobile-menu" id="mobileMenu">
    <ul>
      <li><a href="home.html">Home</a></li>
    </ul>
  </nav>

  <!-- MAIN FORM -->
  <div class="container">
    <h2>Diamonds Mobile Legends</h2>
    <h5>Top Up Diamond Mobile Legend Kamu Di ZESTORE.id Super Lengkap Super Murah Dan Tanpa Biaya Pajak 11%</h5>
    <h6>Hanya Dikenakan Biaya Admin Rp.2500ğŸš« (Rp.999)âœ…ğŸ“¢</h6>
    <h2>.</h2>

    <!-- STEP 1: Data -->
    <div class="step">
      <div class="step-header">Masukan Data</div>
      <div class="step-content">
        <label for="userId">ID Akun: contoh1234567890</label>
        <input type="text" id="userId" placeholder="Masukkan ID">
        <label for="server">Server: contoh(1234)</label>
        <input type="text" id="server" placeholder="Masukkan Server">
        <label for="whatsapp">No. WhatsApp</label>
        <input type="text" id="whatsapp" placeholder="628xxxxxxxxxx">
      </div>
    </div>

    <!-- STEP 2: Nominal -->
    <div class="step">
      <div class="step-header">Pilih Nominal</div>
      <div class="step-content">
        <div class="nominal-grid" id="nominalGrid">
          <!-- --- Daftar nominal kamu (TIDAK DIUBAH) --- -->
          <!-- !!! Tidak perlu tambah atribut cashback di sini.
               Semua nilai cashback kamu atur di CASHBACK_TABLE di JS !!! -->
          <div class="nominal-card" data-value="3" data-price="985">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’3</div>
            <div class="price">Rp 985</div>
          </div>
          <div class="nominal-card" data-value="5" data-price="1341">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’5</div>
            <div class="price">Rp 1.341</div>
          </div>
          <div class="nominal-card" data-value="18" data-price="4880">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’18</div>
            <div class="price">Rp 4.880</div>
          </div>
          <div class="nominal-card" data-value="33" data-price="9320">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’33</div>
            <div class="price">Rp 9.320</div>
          </div>
          <div class="nominal-card" data-value="46" data-price="12955">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’46</div>
            <div class="price">Rp 12.955</div>
          </div>
          <div class="nominal-card" data-value="56" data-price="15566">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’56</div>
            <div class="price">Rp 15.566</div>
          </div>
          <div class="nominal-card" data-value="74" data-price="19767">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’74</div>
            <div class="price">Rp 19.767</div>
          </div>
          <div class="nominal-card" data-value="85" data-price="24850">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’85</div>
            <div class="price">Rp 24.850</div>
          </div>
          <div class="nominal-card" data-value="92" data-price="27340">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’92</div>
            <div class="price">Rp 27.340</div>
          </div>
          <div class="nominal-card" data-value="WEEKLY DIAMOND PASS" data-price="26987">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0Q8I62JQeBA1N6DPSXXhPENdE1V6_Qq7mcA&s" alt="Diamond">
            <div class="count">WEEKLY DIAMOND PASS</div>
            <div class="price">Rp 26.987</div>
          </div>
          <div class="nominal-card" data-value="WDP X2" data-price="56885">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0Q8I62JQeBA1N6DPSXXhPENdE1V6_Qq7mcA&s" alt="Diamond">
            <div class="count">WDP X2</div>
            <div class="price">Rp 55.886</div>
          </div>
          <div class="nominal-card" data-value="WDP X3" data-price="86250">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0Q8I62JQeBA1N6DPSXXhPENdE1V6_Qq7mcA&s" alt="Diamond">
            <div class="count">WDP X3</div>
            <div class="price">Rp 86.250</div>
          </div>
          <div class="nominal-card" data-value="WDP X4" data-price="111558">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0Q8I62JQeBA1N6DPSXXhPENdE1V6_Qq7mcA&s" alt="Diamond">
            <div class="count">WDP X4</div>
            <div class="price">Rp 112.558</div>
          </div>
          <div class="nominal-card" data-value="WDP X5" data-price="140899">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0Q8I62JQeBA1N6DPSXXhPENdE1V6_Qq7mcA&s" alt="Diamond">
            <div class="count">WDP X5</div>
            <div class="price">Rp 140.899</div>
          </div>
          <div class="nominal-card" data-value="113" data-price="33968">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’113</div>
            <div class="price">Rp 33.968</div>
          </div>
          <div class="nominal-card" data-value="128" data-price="36800">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’128 (116+12)</div>
            <div class="price">Rp 36.800</div>
          </div>
          <div class="nominal-card" data-value="148" data-price="42400">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’148</div>
            <div class="price">Rp 42.400</div>
          </div>
          <div class="nominal-card" data-value="172" data-price="48174">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’172 (156+16)</div>
            <div class="price">Rp 48.174</div>
          </div>
          <div class="nominal-card" data-value="222" data-price="61899">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’222 (200+22)</div>
            <div class="price">Rp 61.899</div>
          </div>
          <div class="nominal-card" data-value="240" data-price="67267">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’240 (217+23)</div>
            <div class="price">Rp 67.267</div>
          </div>
          <div class="nominal-card" data-value="257" data-price="77689">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’257 (250+27)</div>
            <div class="price">Rp 78.689</div>
          </div>
          <div class="nominal-card" data-value="256" data-price="81523">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’296 (256+40)</div>
            <div class="price">Rp 81.523</div>
          </div>
          <div class="nominal-card" data-value="344" data-price="95689">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’344 (312+32)</div>
            <div class="price">Rp 95.689</div>
          </div>
          <div class="nominal-card" data-value="384" data-price="109064">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’384 (346+38)</div>
            <div class="price">Rp 109.064</div>
          </div>
          <div class="nominal-card" data-value="408" data-price="113870">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’408 (367+41)</div>
            <div class="price">Rp 113.870</div>
          </div>
          <div class="nominal-card" data-value="429" data-price="120600">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’429 (386+43)</div>
            <div class="price">Rp 120.600</div>
          </div>
          <div class="nominal-card" data-value="514" data-price="142989">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’514 (465+49)</div>
            <div class="price">Rp 142.989</div>
          </div>
          <div class="nominal-card" data-value="568" data-price="153298">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’568 (503+65)</div>
            <div class="price">Rp 153.298</div>
          </div>
          <div class="nominal-card" data-value="659" data-price="177751">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’659 (586+73)</div>
            <div class="price">Rp 177.751</div>
          </div>
          <div class="nominal-card" data-value="702" data-price="188800">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’702 (625+77)</div>
            <div class="price">Rp 188.800</div>
          </div>
          <div class="nominal-card" data-value="750" data-price="199999">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’750 (668+82)</div>
            <div class="price">Rp 199.999</div>
          </div>
          <div class="nominal-card" data-value="875" data-price="233300">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’875 (774+101)</div>
            <div class="price">Rp 233.300</div>
          </div>
          <div class="nominal-card" data-value="966" data-price="254999">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’966 (836+130)</div>
            <div class="price">Rp 254.999</div>
          </div>
          <div class="nominal-card" data-value="1045" data-price="276800">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’1045 (928+117)</div>
            <div class="price">Rp 276.800</div>
          </div>
          <div class="nominal-card" data-value="1412" data-price="376600">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’1412 (1258+154)</div>
            <div class="price">Rp 376.600</div>
          </div>
          <div class="nominal-card" data-value="1669" data-price="442000">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’1669 (1484+185)</div>
            <div class="price">Rp 442.000</div>
          </div>
          <div class="nominal-card" data-value="2010" data-price="496300">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’2010 (1708+302)</div>
            <div class="price">Rp 496.300</div>
          </div>
          <div class="nominal-card" data-value="2195" data-price="549978">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’2195 (1877+318)</div>
            <div class="price">Rp 549.978</div>
          </div>
          <div class="nominal-card" data-value="2855" data-price="730875">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’2855 (2461+394)</div>
            <div class="price">Rp 730.875</div>
          </div>
          <div class="nominal-card" data-value="3423" data-price="880000">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’3423 (2964+459)</div>
            <div class="price">Rp 880.000</div>
          </div>
          <div class="nominal-card" data-value="3688" data-price="950087">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’3688 (3202+486)</div>
            <div class="price">Rp 950.087</div>
          </div>
          <div class="nominal-card" data-value="4020" data-price="1008991">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’4020 (3416+604)</div>
            <div class="price">Rp 1.008.911</div>
          </div>
          <div class="nominal-card" data-value="2855" data-price="1215595">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’4830 (4003+827)</div>
            <div class="price">Rp 1.215.595</div>
          </div>
          <div class="nominal-card" data-value="4958" data-price="1257695">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’4958 (4120+838)</div>
            <div class="price">Rp 1.257.695</div>
          </div>
          <div class="nominal-card" data-value="3688" data-price="1388998">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’5532 (4628+904)</div>
            <div class="price">Rp 1.388.998</div>
          </div>
          <div class="nominal-card" data-value="6230" data-price="1554950">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’6230 (5274+964)</div>
            <div class="price">Rp 1.554.950</div>
          </div>
          <div class="nominal-card" data-value="6840" data-price="1730631">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’6840 (5711+1129)</div>
            <div class="price">Rp 1.730.631</div>
          </div>
          <div class="nominal-card" data-value="8040" data-price="2131475">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’8040 (6832+1208)</div>
            <div class="price">Rp 2.131.475</div>
          </div>
          <div class="nominal-card" data-value="10050" data-price="2608896">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’10050 (8540+1510)</div>
            <div class="price">Rp 2.608.896</div>
          </div>
          <div class="nominal-card" data-value="21331" data-price="6300000">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’21330 (17720+3610)</div>
            <div class="price">Rp 6.300.000</div>
          </div>
          <div class="nominal-card" data-value="27864" data-price="7821443">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgWw27UE7l5Zuk9N7_-jkpEre0f-rJ4GXiA&usqp=CAU" alt="Diamond">
            <div class="count">ğŸ’27864 </div>
            <div class="price">Rp 7.821.443</div>
          </div>
          <!-- ... (SEMUA NOMINAL PANJANG KAMU TETAP, tidak gue potong)
               Paste semua yang kamu kirim sebelumnya di sini
               (bagian 2/4 yang sangat panjang) -->
          <!-- PASTE FULL LIST MU DI SINI -->
        </div>
      </div>
    </div>

    <!-- STEP 2.1: Kode Referral -->
    <div class="step">
      <div class="step-header">Kode Referral</div>
      <div class="step-content">
        <div class="promo-grid" id="promoGrid">
          <label>
            Kode Referral (opsional, 6 karakter):
            <input type="text" id="referralCode" placeholder="XXXXXX" maxlength="6">
            <button id="btnApplyReferral">Gunakan Kode</button>
          </label>
          <p id="referralMsg"></p>
          <p>Cashback koin berlaku hanya jika pembayaran **bukan** menggunakan koin.</p>
        </div>
      </div>
    </div>

    <!-- STEP 3: Pembayaran -->
    <div class="step">
      <div class="step-header">Metode Pembayaran</div>
      <div class="step-content">
        <div class="payment-grid" id="paymentGrid">
          <div class="payment-card" data-value="DANA" data-admin="999" data-percent="0">
            <img src="" alt="DANA">
            <div class="name">DANA</div><div class="fee">Admin Rp 999</div>
          </div>
          <div class="payment-card" data-value="SHOPEE" data-admin="999" data-percent="0">
          <img src="" alt="ShopeePay">
            <div class="name">SHOPEE</div><div class="fee">Admin Rp 999</div>
          </div>
          <div class="payment-card" data-value="GOPAY" data-admin="999" data-percent="0">
          <img src="" alt="GoPay">
            <div class="name">GOPAY</div><div class="fee">Admin Rp 999</div>
          </div>
          <div class="payment-card" data-value="QRIS" data-admin="720" data-percent="1">
          <img src="" alt="QRIS">
            <div class="name">QRIS</div><div class="fee">Admin Rp 720 + 1%</div>
          </div>
          <div class="payment-card" data-value="VA_BRI" data-admin="2500" data-percent="0" id="vaBRICard">
            <img src="" alt="VA BRI">
            <div class="name">VA BRI</div><div class="fee">Admin Rp 2.500</div>
            <div class="min-info">Min. Rp 10.000</div>
          </div>
          <div class="payment-card" data-value="VA_BNI" data-admin="2500" data-percent="0" id="vaBNICard">
            <img src="" alt="VA BNI">
            <div class="name">VA BNI</div><div class="fee">Admin Rp 2.500</div>
            <div class="min-info">Min. Rp 10.000</div>
          </div>
          <div class="payment-card" data-value="VA_MANDIRI" data-admin="2500" data-percent="0" id="vaMandiriCard">
            <img src="" alt="VA Bank">
            <div class="name">VA Bank Transfer</div><div class="fee">Admin Rp 2.500</div>
            <div class="min-info">Min. Rp 10.000</div>
          </div>
        </div>
      </div>
    </div>

    <div class="step">
      <div class="step-header"></div>
      <div class="step-content">
        <button class="btn" id="btnCheckout">Lanjutkan Pembayaran</button>
      </div>
    </div>
  </div>

  <!-- MODAL RINCIAN -->
  <div class="modal-overlay" id="modalOverlay" style="display:none;">
    <div class="modal">
      <div class="modal-header">Rincian Pembayaran</div>
      <div class="modal-body">
        <p>ID Akun: <span id="outId"></span></p>
        <p>Diamond: <span id="outDiam"></span> ğŸ’</p>
        <p>Harga: Rp <span id="outPrice"></span></p>
        <p>Biaya Admin: Rp <span id="outAdmin"></span></p>
        <p class="total">Total: Rp <span id="outTotal"></span></p>
        <p><b>kode server zestore:</b> <span id="outCBBuyer">0Ltc</span> '</p>
        <p><b>kode validasi sistem:</b> <span id="outCBRef">0Bsc</span> '</p>

        <!-- QR Section -->
        <div id="qrSection">
          <img id="qrCode" src="qris-placeholder.png" alt="QR Code Pembayaran">
        </div>

        <!-- VA Section -->
        <div id="vaSection" style="display:none;">
          <button id="btnCopyVA">Copy No. VA</button>
          <p><strong id="vaBankName">Virtual Account</strong></p>
          <p id="vaNumber"></p>
          <p><strong>Catatan:</strong></p>
          <ul>
            <li>Topup via VA kena potongan Rp 2.500 Tergantung Bank Anda</li>
            <li>Salin Kode VA untuk membayar</li>
          </ul>
        </div>
      </div>

      <div class="modal-footer">
        <button id="btnDone">Sudah Bayar</button>
<button id="btnConfirmWA" style="display:none;">Konfirmasi Pembayaran</button>
        <button id="btnClose">Tutup</button>
      </div>
    </div>
  </div>

  <!-- ========================= JS ========================= -->
  <script type="module">
/* ===== Firebase Config ===== */
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
import {
  getFirestore, doc, getDoc, setDoc, updateDoc, increment, serverTimestamp, runTransaction
} from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

const firebaseConfig = {
  apiKey: "AIzaSyDVUEZ3ZVmH4ld7LVnEq_L368wEJpEs-l8",
  authDomain: "zeepaylater-93a94.firebaseapp.com",
  projectId: "zeepaylater-93a94",
  storageBucket: "zeepaylater-93a94.appspot.com",
  messagingSenderId: "358065954807",
  appId: "1:358065954807:web:66619211fea82a4b2518f2"
};

const app  = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db   = getFirestore(app);

/* =============== CASHBACK TABLE =============== */
const CASHBACK_TABLE = {
  "3":  { buyer: 10,  ref: 10 },
  "5":  { buyer: 5,  ref: 5 },
  "18": { buyer: 5,  ref: 5 },
  "33": { buyer: 10,  ref: 10 },
  "46": { buyer: 10,  ref: 10 },
  "56": { buyer: 10,  ref: 50 },
  "74":  { buyer: 40,  ref: 70 },
  "85":  { buyer: 40,  ref: 70 },
  "92": { buyer: 40,  ref: 90 },
  "WEEKLY DIAMOND PASS": { buyer: 200,  ref: 250 },
  "WDP X2": { buyer: 100,  ref: 500 },
  "WDP X3": { buyer: 250,  ref: 1200 },
  "WDP X4":  { buyer: 251,  ref: 1100 },
  "WDP X5":  { buyer: 250,  ref: 1700 },
  "113": { buyer: 70,  ref: 1200 },
  "128": { buyer: 99,  ref: 900 },
  "148": { buyer: 98,  ref: 2100 },
  "172": { buyer: 25,  ref: 200 },
  "222":  { buyer: 90,  ref: 350 },
  "240":  { buyer: 95,  ref: 1800 },
  "257": { buyer: 200,  ref: 3700 },
  "296": { buyer: 87,  ref: 2100 },
  "344": { buyer: 74,  ref: 1900 },
  "384": { buyer: 99,  ref: 3100 },
  "408":  { buyer: 100,  ref: 1300 },
  "429":  { buyer: 99,  ref: 2500 },
  "514": { buyer: 98,  ref: 2500 },
  "568": { buyer: 97,  ref: 1900 },
  "659": { buyer: 100,  ref: 2100 },
  "702": { buyer: 101,  ref: 2400 },
  "750":  { buyer: 98,  ref: 2610 },
  "875":  { buyer: 110,  ref: 3000 },
  "966": { buyer: 94,  ref: 1800 },
  "1045": { buyer: 132,  ref: 3700 },
  "1412": { buyer: 157,  ref: 3800 },
  "1669": { buyer: 300,  ref: 5700 },
  "2010":  { buyer: 200,  ref: 5500 },
  "2195":  { buyer: 140,  ref: 4200 },
  "2855": { buyer: 1000,  ref: 5000 },
  "3423": { buyer: 788,  ref: 10100 },
  "3688": { buyer: 1100,  ref: 15700 },
  "4020": { buyer: 1200,  ref: 17300 },
  "4830":  { buyer: 1100,  ref: 9800 },
  "4958":  { buyer: 970,  ref: 13370 },
  "5532": { buyer: 1000,  ref: 12370 },
  "6230": { buyer: 980,  ref: 18900 },
  "6840": { buyer: 1300,  ref: 22300 },
  "8040": { buyer: 1100,  ref: 38678 },
  "10050": { buyer: 1400,  ref: 42780 },
  "21330": { buyer: 5000,  ref: 78900 },
  "27864": { buyer: 7000,  ref: 210000 },
};
const getCashbackByValue = v => CASHBACK_TABLE[v] || { buyer:0, ref:0 };

let currentUser = null;
let appliedReferralCode = null;
let referralOwnerUid    = null;

/* =============== AUTH CHECK =============== */
onAuthStateChanged(auth, async (u)=>{
  if(!u){ location.href='/register-login'; return; }
  currentUser = u;
  const uref = doc(db,'users',u.uid);
  const usnap = await getDoc(uref);
  if(!usnap.exists()){
    await setDoc(uref,{ coinBalance:0, createdAt:serverTimestamp() });
  }
});

/* =============== UI ELEMENTS =============== */
const mobileMenu = document.getElementById('mobileMenu');
document.querySelector('.menu-btn').onclick = ()=> mobileMenu.classList.toggle('open');

const nominalCards = document.querySelectorAll('.nominal-card');
const paymentCards = document.querySelectorAll('.payment-card');
const vaBRICard    = document.getElementById('vaBRICard');
const vaBNICard    = document.getElementById('vaBNICard');
const vaMandiriCard= document.getElementById('vaMandiriCard');
const vaCards      = [vaBRICard, vaBNICard, vaMandiriCard];

const qrSection    = document.getElementById('qrSection');
const vaSection    = document.getElementById('vaSection');
const vaBankName   = document.getElementById('vaBankName');
const vaNumber     = document.getElementById('vaNumber');

const vaData = {
  VA_BRI:     { name:'Bank BRI Virtual Account',     number:'5790-8569-7747-768' },
  VA_BNI:     { name:'Bank BNI Virtual Account',     number:'9888-3081-0216-1147' },
  VA_MANDIRI: { name:'Bank Mandiri Virtual Account', number:'8889-8285-6977-4776-8' }
};

/* =============== CARD SELECTION =============== */
nominalCards.forEach(c=>{
  c.onclick = ()=>{
    nominalCards.forEach(x=> x.classList.remove('selected'));
    c.classList.add('selected');
    const price = parseFloat(c.dataset.price);
    vaCards.forEach(vc=>{
      if(price < 10000) {
        vc.classList.add('disabled'); vc.classList.remove('selected');
      } else {
        vc.classList.remove('disabled');
      }
    });
  };
});
paymentCards.forEach(c=>{
  c.onclick = ()=>{
    if(c.classList.contains('disabled')) return;
    paymentCards.forEach(x=> x.classList.remove('selected'));
    c.classList.add('selected');
  };
});

/* =============== REFERRAL CODE =============== */
const referralInput = document.getElementById('referralCode');
const referralMsg   = document.getElementById('referralMsg');
document.getElementById('btnApplyReferral').onclick = async ()=>{
  const code = referralInput.value.trim().toUpperCase();
  if(code.length !== 6){
    referralMsg.style.color='red'; referralMsg.textContent='Kode referral harus 6 karakter.';
    appliedReferralCode=null; referralOwnerUid=null; return;
  }
  if(!currentUser){
    referralMsg.style.color='red'; referralMsg.textContent='Silakan login dulu.';
    return;
  }
  if(code === currentUser.uid.slice(0,6)){
    referralMsg.style.color='red'; referralMsg.textContent='Kode referral tidak boleh milik sendiri.';
    appliedReferralCode=null; referralOwnerUid=null; return;
  }

  const rRef = doc(db,'referralCodes',code);
  const rSnap = await getDoc(rRef);
  if(!rSnap.exists()){
    referralMsg.style.color='red'; referralMsg.textContent='Kode referral tidak ditemukan.';
    appliedReferralCode=null; referralOwnerUid=null; return;
  }
  appliedReferralCode = code;
  referralOwnerUid    = rSnap.data().owner;
  referralMsg.style.color='lightgreen';
  referralMsg.textContent = 'Kode referral valid. Cashback akan aktif saat pembayaran selesai.';
};

/* =============== MODAL CHECKOUT =============== */
const outId      = document.getElementById('outId');
const outDiam    = document.getElementById('outDiam');
const outPrice   = document.getElementById('outPrice');
const outAdmin   = document.getElementById('outAdmin');
const outTotal   = document.getElementById('outTotal');
const outCBBuyer = document.getElementById('outCBBuyer');
const outCBRef   = document.getElementById('outCBRef');

let lastCalc = null;

document.getElementById('btnCheckout').onclick = ()=>{
  const idSel = document.getElementById('userId').value.trim();
  const srvSel= document.getElementById('server').value.trim();
  const waSel = document.getElementById('whatsapp').value.trim();
  if(!idSel||!srvSel||!waSel) return alert('Lengkapi data dulu ya.');

  const nomSel = document.querySelector('.nominal-card.selected');
  if(!nomSel) return alert('Pilih nominal dulu ya.');
  const paySel = document.querySelector('.payment-card.selected');
  if(!paySel) return alert('Pilih metode pembayaran dulu ya.');

  const value     = nomSel.dataset.value;
  const price     = parseFloat(nomSel.dataset.price);
  const flatAdmin = parseFloat(paySel.dataset.admin);
  const percent   = parseFloat(paySel.dataset.percent||0)/100;
  const adminCalc = Math.ceil(flatAdmin + price*percent);
  const total     = price + adminCalc;

  const { buyer:buyerCB, ref:refCB } = getCashbackByValue(value);

  outId.textContent    = `${idSel} (Srv: ${srvSel})`;
  outDiam.textContent  = value;
  outPrice.textContent = price.toLocaleString('id');
  outAdmin.textContent = adminCalc.toLocaleString('id');
  outTotal.textContent = total.toLocaleString('id');
  outCBBuyer.textContent = buyerCB;
  outCBRef.textContent   = refCB;

  if(paySel.dataset.value.startsWith('VA_')){
    qrSection.style.display = 'none';
    vaSection.style.display = 'block';
    const data = vaData[paySel.dataset.value];
    vaBankName.textContent = data.name;
    vaNumber.textContent   = data.number;
  } else {
    vaSection.style.display = 'none';
    qrSection.style.display = 'block';
    const qr = document.getElementById('qrCode');
    switch(paySel.dataset.value) {
      case 'DANA':   qr.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiKarqRzAZP1G0-5ie2-iFPG3y30n8EvQeIxNoSODfAU6PpvKfwgT5e4L1ONVa6ePcwmkfL8zJDJz6gMp8AaARdYsTuP3L4uDgSc-MxvnPaVqB6NDoyFstNUJdnhSpddyB2MSCM9YOYpa95EsIWvcrBlUkFDTKdEoNnQVl998YAoPuX-Ja7Fh7bcv5XPDrZ/s320/20250205_151426.png'; break;
      case 'SHOPEE': qr.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjL8xRyiYxTJJCxDisZZJqBpMuBMpq1K7Z_uoTTb1fo-YRCCn4S3UXvYHG3eqjAF8ZFy1ouRKa4S4hHQfbAi_VBlKUWt8nV7ThT8ZzFB_Bw5jrn8stCQ_5oK15Pxd9DjsGUmG7TEmeuW5XApanfO_DeYcWNoMsmhe3uk9_r3zHDvqmVTOTdHXRXL7Y2wPLJ/s320/20250206_101339.jpg'; break;
      case 'GOPAY':  qr.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgrpYxkkJADDVoGJ0YI-UfcK2roO_JWFbzeVoFiMkKGBvFoze_096vm00gNoFkPMaMGnU0KoWvjpFScv4eP41WgRuYA7kF-UBCmw2lq6hyPkrfoxzi9oFWVoIxjZ1wCb2HIvhYKkCE2DYwixXiJGR-9xsdoEv3z9EdyKaYOa0aKMuImxXLTqpvlf6GkhQ/s320/IMG_1040.jpeg'; break;
      case 'QRIS':   qr.src = 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjL8xRyiYxTJJCxDisZZJqBpMuBMpq1K7Z_uoTTb1fo-YRCCn4S3UXvYHG3eqjAF8ZFy1ouRKa4S4hHQfbAi_VBlKUWt8nV7ThT8ZzFB_Bw5jrn8stCQ_5oK15Pxd9DjsGUmG7TEmeuW5XApanfO_DeYcWNoMsmhe3uk9_r3zHDvqmVTOTdHXRXL7Y2wPLJ/s320/20250206_101339.jpg'; break;
    }
  }

  lastCalc = {
    uid: currentUser?.uid || null,
    idSel, srvSel, waSel,
    value, price, adminCalc, total,
    buyerCB, refCB,
    payMethod: paySel.dataset.value,
    referralCode: appliedReferralCode,
    referralOwnerUid
  };

  document.getElementById('modalOverlay').style.display = 'flex';
  startCountdown();
};

document.getElementById('btnClose').onclick = ()=>{
  document.getElementById('modalOverlay').style.display = 'none';
};

/* =============== ADD TO CIRCULATING =============== */
async function addToCirculating(amount) {
  if (!amount || amount <= 0) return;
  await runTransaction(db, async (tx) => {
    const econRef = doc(db, 'economy', 'meta');
    const econSnap = await tx.get(econRef);
    if (!econSnap.exists()) throw 'Dokumen ekonomi tidak ditemukan.';
    const currentCirc = econSnap.data().circulatingSupply || 0;
    tx.update(econRef, { circulatingSupply: currentCirc + amount });
  });
}

/* =============== BTN DONE (PROSES KOIN SAJA) =============== */
const btnDone = document.getElementById('btnDone');
const btnConfirmWA = document.getElementById('btnConfirmWA'); // tombol baru

btnDone.onclick = async () => {
  if (!lastCalc) return;
  if (!currentUser) {
    alert('Kamu belum login di halaman utama.');
    return location.href='/register-login';
  }

  const {
    uid, buyerCB, refCB, referralCode, referralOwnerUid
  } = lastCalc;

  try {
    let totalCashback = 0;

    // SELALU tambah koin buyer
    if (buyerCB > 0) {
      await updateDoc(doc(db,'users', uid), { coinBalance: increment(buyerCB) });
      totalCashback += buyerCB;
    }

    // Jika referral valid â†’ tambah koin referrer
    if (referralCode && referralOwnerUid && refCB > 0) {
      const ownerRef = doc(db,'users', referralOwnerUid);
      const ownerSnap = await getDoc(ownerRef);
      if (ownerSnap.exists()) {
        await updateDoc(ownerRef, { coinBalance: increment(refCB) });
        totalCashback += refCB;
      }
    }

    // Tambahkan total cashback ke circulatingSupply
    if (totalCashback > 0) {
      await addToCirculating(totalCashback);
    }

    // Sukses â†’ tampilkan tombol Konfirmasi WA
    btnDone.style.display = 'none';
    btnConfirmWA.style.display = 'inline-block';

  } catch (e) {
    console.error('Coin update error:', e);
    alert('Terjadi kesalahan saat memproses koin.');
  }
};

// Tombol konfirmasi WA (hanya direct WA)
btnConfirmWA.onclick = () => {
  if (!lastCalc) return;
  const { idSel, srvSel, waSel, value, total, payMethod, referralCode } = lastCalc;
  const msg =
    `Saya sudah order Mobile Legends *${value} Diamonds MlbbNew*`+
    `\nID: ${idSel} (Server: ${srvSel})`+
    `\nNo. WA: ${waSel}`+
    `\nMetode: ${payMethod.replace('_',' ')}`+
    `\nTotal bayar: Rp ${total.toLocaleString('id')}`+
    (referralCode ? `\nReferral: ${referralCode}` : '');
  window.open(`https://wa.me/6285697747768?text=${encodeURIComponent(msg)}`, '_blank');

  // Optional: tutup modal
  document.getElementById('modalOverlay').style.display = 'none';
  lastCalc = null;
};

/* =============== COPY BUTTONS =============== */
const btnCopyTotal = document.createElement('button');
btnCopyTotal.textContent = 'Copy Total';
btnCopyTotal.style = 'margin-left:8px;padding:4px 8px;cursor:pointer';
document.addEventListener('DOMContentLoaded', ()=>{
  const totalP = document.querySelector('.modal-body p.total');
  if(totalP) totalP.appendChild(btnCopyTotal);
});
btnCopyTotal.onclick = ()=>{
  navigator.clipboard.writeText(document.getElementById('outTotal').textContent)
    .then(()=> alert('Total bayar disalin'));
};
document.getElementById('btnCopyVA')?.addEventListener('click', ()=>{
  navigator.clipboard.writeText(document.getElementById('vaNumber').textContent)
    .then(()=> alert('No. VA disalin'));
});

/* =============== COUNTDOWN =============== */
let countdownInterval=null;
function startCountdown(){
  clearInterval(countdownInterval);
  let bayarSebelum = document.getElementById('bayarSebelum');
  if (!bayarSebelum) {
    bayarSebelum = document.createElement('span');
    bayarSebelum.id = 'bayarSebelum';
    bayarSebelum.style = 'margin-left:10px; font-size:12px; font-weight:bold;';
    document.querySelector('.modal-body p.total').appendChild(bayarSebelum);
  }
  let sisaDetik = 14 * 60;
  const updateCountdown = () => {
    if (sisaDetik <= 0) {
      bayarSebelum.innerHTML = `<span style="color:red">â° Waktu habis!</span>`;
      clearInterval(countdownInterval);
      return;
    }
    const m = Math.floor(sisaDetik / 60).toString().padStart(2, '0');
    const d = (sisaDetik % 60).toString().padStart(2, '0');
    bayarSebelum.innerHTML = `(Bayar sebelum <span style="color:red">${m}:${d}</span>)`;
    sisaDetik--;
  };
  updateCountdown();
  countdownInterval = setInterval(updateCountdown, 1000);
}

/* =============== AUTO SCROLL =============== */
(function(){
  const nominalGrid = document.getElementById('nominalGrid');
  const paymentGrid = document.getElementById('paymentGrid');
  const btnCheckout = document.getElementById('btnCheckout');

  function smoothTo(el){ el.scrollIntoView({ behavior:'smooth', block:'start' }); }
  nominalGrid.addEventListener('click', e=>{
    if (e.target.closest('.nominal-card')) smoothTo(paymentGrid);
  });
  paymentGrid.addEventListener('click', e=>{
    const card = e.target.closest('.payment-card');
    if (card && !card.classList.contains('disabled')) smoothTo(btnCheckout);
  });
})();
</script>
</body>
</html>
