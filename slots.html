<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Slots of Olympus ‚ö°</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(#321d5a, #7a5ecc);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      text-align: center;
      background: rgba(255,255,255,0.1);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
    }
    .slot-grid {
      display: grid;
      grid-template-columns: repeat(5, 80px);
      grid-template-rows: repeat(3, 80px);
      gap: 10px;
      margin: 20px auto;
    }
    .slot-cell {
      width: 80px;
      height: 80px;
      background: rgba(255,255,255,0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 30px;
      border-radius: 10px;
      box-shadow: inset 0 0 5px #fff;
      transition: transform 0.2s;
    }
    button {
      padding: 12px 20px;
      font-size: 18px;
      margin: 5px;
      border: none;
      background: gold;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: orange;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
    }
    #freeSpins {
      font-weight: bold;
      color: #ffeb3b;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Slots of Olympus ‚ö°</h1>
    <div class="slot-grid" id="slotGrid"></div>
    <div>
      <button id="spinBtn">üîÑ SPIN</button>
      <button id="boosterBtn">üöÄ BOOSTER</button>
    </div>
    <p>Free Spins: <span id="freeSpins">0</span></p>
    <p id="result"></p>
  </div>

  <script>
    const symbols = ['‚ö°','üëë','üíé','üî•','üçá','üî±','‚≠ê']; // ‚≠ê = scatter
    const SCATTER = '‚≠ê';
    const cols = 5, rows = 3;
    const gridEl = document.getElementById('slotGrid');
    const resultEl = document.getElementById('result');
    const freeSpinsEl = document.getElementById('freeSpins');
    const spinBtn = document.getElementById('spinBtn');
    const boosterBtn = document.getElementById('boosterBtn');

    let freeSpins = 0;

    function updateFreeSpins() {
      freeSpinsEl.textContent = freeSpins;
    }

    function createGrid() {
      gridEl.innerHTML = '';
      for (let i = 0; i < cols * rows; i++) {
        const cell = document.createElement('div');
        cell.className = 'slot-cell';
        cell.textContent = getRandomSymbol();
        gridEl.appendChild(cell);
      }
    }

    function getRandomSymbol() {
      return symbols[Math.floor(Math.random() * symbols.length)];
    }

    // spin dengan opsi booster: jika true, groupSize = 3; else 1
    function spin(withBooster, isManual) {
      spinBtn.disabled = true;
      boosterBtn.disabled = true;
      resultEl.textContent = '';
      const cells = Array.from(document.querySelectorAll('.slot-cell'));
      const groupSize = withBooster ? 3 : 1;
      const groupDelays = [];
      for (let start = 0; start < cols; start += groupSize) {
        groupDelays.push(start / groupSize * 200);
      }
      // animate per group
      groupDelays.forEach((delay, gi) => {
        setTimeout(() => {
          const startCol = gi * groupSize;
          for (let c = startCol; c < Math.min(startCol + groupSize, cols); c++) {
            for (let r = 0; r < rows; r++) {
              const idx = r * cols + c;
              cells[idx].textContent = getRandomSymbol();
              cells[idx].style.transform = 'translateY(-20px)';
              setTimeout(() => { cells[idx].style.transform = 'translateY(0)'; }, 100);
            }
          }
          // setelah animasi terakhir group, cek hasil
          if (gi === groupDelays.length - 1) {
            const finalSymbols = cells.map(c => c.textContent);
            evaluate(finalSymbols, isManual);
            spinBtn.disabled = false;
            boosterBtn.disabled = false;
          }
        }, delay);
      });
    }

    function evaluate(gridSymbols, isManual) {
      // cek jackpot di baris tengah
      const mid = gridSymbols.slice(rows, rows*2);
      if (mid.every(s => s === mid[0])) {
        resultEl.textContent = `üéâ JACKPOT: ${mid[0].repeat(3)}!`;
      }
      // cek scatter manual
      const scatters = gridSymbols.filter(s => s === SCATTER).length;
      if (isManual && scatters >= 3) {
        freeSpins += 10;
        updateFreeSpins();
        resultEl.textContent = `‚ú® Scatter x${scatters}! +10 Free Spins!`;
        autoSpin();
      } else if (!resultEl.textContent) {
        resultEl.textContent = 'üò¢ Better luck next time.';
      }
    }

    function autoSpin() {
      if (freeSpins > 0) {
        freeSpins--;
        updateFreeSpins();
        setTimeout(() => { spin(false, false); }, 500);
      }
    }

    spinBtn.addEventListener('click', () => spin(false, true));
    boosterBtn.addEventListener('click', () => spin(true, true));

    window.onload = () => {
      createGrid();
      updateFreeSpins();
    };
  </script>
</body>
</html>
