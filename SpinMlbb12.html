<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin Wheel</title>
    <style>
body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('https://i.pinimg.com/originals/4d/4e/0e/4d4e0e1c89a8c2cbe6325b08176a19fb.gif') no-repeat center center fixed;
    background-size: cover;
    
}
        

        .container {
            text-align: center;
            color: Magenta;
        }

        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 20px auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
            background: #FFA500;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }

.slice {
    position: absolute;
    width: 50%;
    height: 50%;
    transform-origin: 100% 100%;
    left: 50%;
    top: 50%;
    margin-left: -50%;
    margin-top: -50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    clip-path: polygon(120% 0, 0 0, 70% 110%);
}

        .slice::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.1);
            transform-origin: 100% 100%;
        }

        .slice::after {
            content: '';
            position: absolute;
            width: 2px;
            height: 100%;
            background: #8B4513;
            right: 0;
            transform-origin: 100% 100%;
        }

.slice-content {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) rotate(0deg); /* Pastikan teks tidak miring */
    white-space: nowrap;
    font-size: 16px; /* Ukuran teks lebih besar */
    font-weight: bold;
    text-align: center;
    max-width: 80%; /* Pastikan teks tidak terlalu melebar */
}

        .pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #8B4513;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 2;
        }

        .input-section {
            margin: 20px 0;
        }

        input {
            padding: 10px;
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

button {
    padding: 10px 20px;
    background-image: url('https://data.textstudio.com/output/sample/animated/4/9/1/6/spin-22-16194.gif'); /* Ganti dengan gambar yang diinginkan */
    background-size: cover;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    text-align: center;
    transition: background 0.3s ease;
    position: relative;
}

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .prize-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .prize-popup a {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 16px;
            background: #8B4513;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }

        /* Pizza texture styling */
        .wheel::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 30%, rgba(139, 69, 19, 0.1) 31%);
            background-size: 30px 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RODA KEBERUNTUNGAN GAMERS</h1>
        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel" id="wheel"></div>
        </div>
        <div class="input-section">
            <input type="text" id="codeInput" placeholder="Tukarkan Kode">
            <button onclick="spin()" id="spinButton">ã…¤ã…¤ã…¤ã…¤</button>
            <h6>Top Up minimal 50ðŸ’Ž dan dapatkan 1x spin Pertama GRATISS!</h6>
            <h5>setiap Kelipatan 100ðŸ’Ž lalu dapatkan lagi 1x spin tambahan</h5>
        </div>
        <div id="prizePopup" class="prize-popup">
            <h2>Selamat! ðŸŽ‰</h2>
            <p id="prizeMessage"></p>
            <a href="#" id="claimLink" target="_blank">Ambil Hadiah</a>
        </div>
    </div>

    <script>
        const prizes = [
            { name: 'ã…¤ã…¤ã…¤Zonk', probability: 0.06, color: '#FF6B6B' },
            { name: 'ã…¤ã…¤ã…¤WDP 7H', probability: 0.02, color: '#4ECDC4' },
            { name: 'ã…¤ã…¤Starlight 30H', probability: 0.01, color: '#45B7D1' },
            { name: 'ã…¤ã…¤ã…¤Zonk', probability: 0.4, color: '#96CEB4' },
            { name: 'ã…¤ã…¤ã…¤Epic Skin', probability: 0.005, color: '#96CED8' },
            { name: 'ã…¤ã…¤ã…¤1220 ðŸ’Ž', probability: 0.005, color: '#FFD93D' },
            { name: 'ã…¤ã…¤ã…¤ã…¤5 ðŸ’Ž', probability: 0.5, color: '#FF6B6B' }
        ];

        // Create wheel slices
        const wheel = document.getElementById('wheel');
        const sliceAngle = 360 / prizes.length;

        prizes.forEach((prize, index) => {
            const slice = document.createElement('div');
            slice.className = 'slice';
            slice.style.transform = `rotate(${sliceAngle * index}deg)`;
            
            const content = document.createElement('div');
            content.className = 'slice-content';
            content.textContent = prize.name;
            
            slice.appendChild(content);
            wheel.appendChild(slice);

            // Add pizza texture to each slice
            slice.style.background = `linear-gradient(45deg, ${prize.color}, ${adjustBrightness(prize.color, -20)})`;
        });

        function adjustBrightness(color, percent) {
            const num = parseInt(color.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + 
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + 
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        let isSpinning = false;

let codeUsageCount = 0; // Jumlah penggunaan kode
const maxUsage = 2; // Maksimal penggunaan kode

    // Daftar kode yang bisa digunakan dan maksimal penggunaannya
    const validCodes = {
        'zestore.top up': 1,
        'zestore2025': 1,
        'mlbbxzestore12': 1,
        '4444': 1,
        '7777': 1,
        '1234': 1,
        '8888': 1,
        '5678': 1,
        '4321': 1,
        '0000': 1
    };

    let usedCodes = {}; // Menyimpan jumlah penggunaan tiap kode

    function spin() {
        const codeInput = document.getElementById('codeInput');
        const code = codeInput.value.trim(); // Ambil kode dari input

        // Periksa apakah kode ada dalam daftar validCodes
        if (!validCodes.hasOwnProperty(code)) {
            alert('Kode salah! Silakan coba lagi.');
            return;
        }

        // Periksa apakah kode sudah mencapai batas penggunaan
        if (usedCodes[code] >= validCodes[code]) {
            alert("Kode ini sudah mencapai batas penggunaan!");
            return;
        }

        // Tambah jumlah penggunaan kode
        usedCodes[code] = (usedCodes[code] || 0) + 1;
        console.log(`Kode ${code} telah digunakan ${usedCodes[code]} kali.`);

        // Lanjutkan proses spin tanpa perubahan lain...
        const spinButton = document.getElementById('spinButton');
        spinButton.disabled = true;

        const random = Math.random();
        let probabilitySum = 0;
        let selectedPrize;

        for (const prize of prizes) {
            probabilitySum += prize.probability;
            if (random <= probabilitySum) {
                selectedPrize = prize;
                break;
            }
        }

        const prizeIndex = prizes.indexOf(selectedPrize);
        const extraSpins = 5; // Jumlah putaran penuh sebelum berhenti
        const finalRotation = extraSpins * 360 + (400 - (prizeIndex * sliceAngle));

        wheel.style.transform = `rotate(${finalRotation}deg)`;

        setTimeout(() => {
            spinButton.disabled = false;
            showPrize(selectedPrize);
        }, 5000);
    }

function showPrize(prize) {
    const popup = document.getElementById('prizePopup');
    const message = document.getElementById('prizeMessage');
    const claimLink = document.getElementById('claimLink');
    const title = popup.querySelector("h2");

    if (prize.name === "ã…¤ã…¤ã…¤Zonk") {
        title.textContent = "Ahh hampir saja!";
        message.textContent = "Coba lain kali ya!"; 
        claimLink.style.display = "none"; // Sembunyikan tombol klaim hadiah
    } else {
        title.textContent = "Selamat gamers! ðŸŽ‰";
        message.textContent = `Kamu Mendapatkan: ${prize.name}!`;
        claimLink.href = `https://zestore.netlify.app/${prize.name.toLowerCase().replace(' ', '-')}`;
        claimLink.style.display = "inline-block"; // Tampilkan tombol klaim hadiah
    }

    popup.style.display = 'block';

    // Close popup ketika klik di luar
    document.onclick = function(e) {
        if (!popup.contains(e.target) && e.target.id !== 'spinButton') {
            popup.style.display = 'none';
        }
    };
}
    </script>
</body>
  </html>
